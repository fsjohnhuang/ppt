define("common:widget/ui/admanager/ecomimad/ecomimad",function(require,exports,module){function ecomimad(t){this.$el=$("#imContainer"),this.$title=$("#adCard .card-title"),this.$titleprev=$("#adCard .card-title .sticker"),this.$titleclose=$("#adCard .card-title .close"),this.titletxt=document.createTextNode("读图推广"),this.pageModel=t,this.requestUrl="/search/aspdetail?"}var $=require("common:widget/ui/base/base"),utils=require("common:widget/ui/utils/utils"),events=require("common:widget/ui/base/events"),Ad=require("common:widget/ui/admanager/ad/ad");return $.extend(ecomimad.prototype,Ad,{init:function(){this.tempImgUrl=""},getData:function(t,a){if(t&&1==t.hasAspData){var e={tn:"baiduaspdetail",word:this.pageModel.data.word,ie:"utf-8",objurl:t.objURL};$.ajax({url:this.requestUrl,data:e,success:function(t){a&&a(t)},error:function(){}})}},update:function(imgData,imgModel){this.timer&&clearTimeout(this.timer);var that=this;this.timer=setTimeout(function(){that.getData(imgData,function(data){var jsonData=data;if("string"==typeof data)try{jsonData=eval("("+data+")")}catch(e){return}if(jsonData&&jsonData[70002]){that.$el.html(jsonData[70002]),that.$adTitTpl||(that.$adTitTpl=$(document.createDocumentFragment()),that.$adTitTpl.append(that.$titleprev),that.$adTitTpl.append(that.titletxt),that.$adTitTpl.append(that.$titleclose),that.$title.empty().append(that.$adTitTpl));var $adCard=$("#adCard");$adCard&&$adCard.length&&"hidden"===$adCard.css("visibility")&&$adCard.css("visibility","visible"),$(document.body).trigger("ecomLoaded")}})},40)},getSam:function(t){var a=0;t=t||$.cookie("BAIDUID"),t=t.replace(":FG=1",""),t+=":FG=1";for(var e=0;e<t.length;e++)a=31*a+t.charCodeAt(e),a%=4294967296;var i=a%101;return i}}),ecomimad});